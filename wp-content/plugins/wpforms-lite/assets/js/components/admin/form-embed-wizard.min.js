"use strict";var WPFormsFormEmbedWizard=window.WPFormsFormEmbedWizard||function(o,n){var t={},i={formId:0,isBuilder:!1,isChallengeActive:!1},a={init:function(){n(a.ready),n(o).on("load",a.load)},ready:function(){a.initVars(),a.events()},load:function(){"1"!==wpforms_admin_form_embed_wizard.is_edit_page||i.isChallengeActive||a.initTooltip()},initVars:function(){t={$wizardContainer:n("#wpforms-admin-form-embed-wizard-container"),$wizard:n("#wpforms-admin-form-embed-wizard"),$sectionBtns:n("#wpforms-admin-form-embed-wizard-section-btns"),$sectionGo:n("#wpforms-admin-form-embed-wizard-section-go"),$newPageTitle:n("#wpforms-admin-form-embed-wizard-new-page-title"),$selectPage:n("#wpforms-admin-form-embed-wizard-select-page"),$videoTutorial:n("#wpforms-admin-form-embed-wizard-tutorial")},i.isBuilder="undefined"!=typeof WPFormsBuilder,i.isChallengeActive="undefined"!=typeof WPFormsChallenge},events:function(){t.$wizard.on("click","button",a.popupButtonsClick).on("click",".tutorial-toggle",a.tutorialToggle).on("click",".wpforms-admin-popup-close",a.closePopup)},popupButtonsClick:function(e){var o=n(e.target);if(o.length){var i=o.closest("div");switch(o.data("action")||""){case"select-page":t.$newPageTitle.hide();break;case"create-page":t.$selectPage.hide();break;case"go":if(t.$selectPage.is(":visible")&&""===t.$selectPage.val())return;return o.prop("disabled",!0),void a.saveFormAndRedirect()}i.hide(),i.next().fadeIn()}},tutorialToggle:function(e){e.preventDefault();var o=t.$videoTutorial[0];t.$videoTutorial.toggle(),o.src.indexOf("&autoplay=1")<0?o.src+="&autoplay=1":o.src=o.src.replace("&autoplay=1","")},saveFormAndRedirect:function(){i.isBuilder&&!WPFormsBuilder.formIsSaved()?i.isBuilder&&i.isChallengeActive?WPFormsBuilder.formSave().done(a.embedPageRedirect):n.confirm({title:!1,content:wpforms_builder.exit_confirm,icon:"fa fa-exclamation-circle",type:"orange",backgroundDismiss:!1,closeIcon:!1,buttons:{confirm:{text:wpforms_builder.save_embed,btnClass:"btn-confirm",keys:["enter"],action:function(){WPFormsBuilder.formSave().done(a.embedPageRedirect)}},cancel:{text:wpforms_builder.embed,action:function(){WPFormsBuilder.setCloseConfirmation(!1),a.embedPageRedirect()}}}}):a.embedPageRedirect()},embedPageRedirectAjaxData:function(){var e={action:"wpforms_admin_form_embed_wizard_embed_page_url",_wpnonce:wpforms_admin_form_embed_wizard.nonce,formId:i.formId};return t.$selectPage.is(":visible")&&(e.pageId=t.$selectPage.val()),t.$newPageTitle.is(":visible")&&(e.pageTitle=t.$newPageTitle.val()),e},embedPageRedirect:function(){var e=a.embedPageRedirectAjaxData();void 0!==e.pageId&&""===e.pageId||n.post(ajaxurl,e,function(e){e.success&&(o.location=e.data)})},openPopup:function(e){e=e||0,i.formId=i.isBuilder?n("#wpforms-builder-form").data("id"):e,t.$wizard.toggleClass("wpforms-challenge-popup",i.isChallengeActive),t.$wizard.find(".wpforms-admin-popup-close").toggle(!i.isChallengeActive),t.$wizard.find(".wpforms-admin-popup-content-regular").toggle(!i.isChallengeActive),t.$wizard.find(".wpforms-admin-popup-content-challenge").toggle(i.isChallengeActive),0===t.$selectPage.length?(t.$sectionBtns.hide(),t.$sectionGo.show()):(t.$sectionBtns.show(),t.$sectionGo.hide()),t.$newPageTitle.show(),t.$selectPage.show(),t.$wizardContainer.fadeIn()},closePopup:function(){t.$videoTutorial.is(":visible")&&t.$wizard.find(".tutorial-toggle").click(),t.$wizardContainer.fadeOut()},initTooltip:function(){var e=n('<span class="wpforms-challenge-dot wpforms-challenge-dot-step5" data-wpforms-challenge-step="5">&nbsp;</span>'),o=a.isGutenberg(),i=o?".block-editor .edit-post-header":"#wp-content-editor-tools .wpforms-insert-form-button",t={content:n("#tooltip-content5"),trigger:"custom",interactive:!0,animationDuration:0,delay:0,theme:["tooltipster-default","wpforms-challenge-tooltip"],side:o?"bottom":"right",distance:3,functionReady:function(e,o){n(o.tooltip).addClass("wpforms-challenge-tooltip-step5"),e._$tooltip.on("click","button",function(){e.close(),n(".wpforms-challenge-dot.wpforms-challenge-dot-step5").remove()}),e.reposition()}};e.insertAfter(i).tooltipster(t).tooltipster("open")},isGutenberg:function(){return"undefined"!=typeof wp&&Object.prototype.hasOwnProperty.call(wp,"blocks")}};return a}((document,window),jQuery);WPFormsFormEmbedWizard.init();